<!DOCTYPE html>
<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml"
		xmlns:f="http://xmlns.jcp.org/jsf/core"
		xmlns:h="http://xmlns.jcp.org/jsf/html"
		xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
		xmlns:jsf="http://xmlns.jcp.org/jsf"
		xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
	<title>
		<ui:insert name="titulo">
			Beto Skate Shop
		</ui:insert>
	</title>
	<h:outputStylesheet library="css" name="reset.css"/>
	<link type="text/css" 
			rel="stylesheet" 
			href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
			integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
			crossorigin="anonymous"/>
	<h:outputStylesheet library="css" name="index.css" />

	<ui:insert name="style">
		<h:outputStylesheet library="css" name="principal.css"/>
	</ui:insert>
</h:head>

<h:body>
<header class="bg-dark">
   	
   	<ui:insert name="h1">
   		<h1 class="bg-dark text-light">
   			<h:outputLabel value=".:Olá #{indexController.usuarioLogado.nome}:."/>
   		</h1>
   	</ui:insert>

   	<h:form id="nav-form">
    	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
	        <h:commandLink class="navbar-brand" action="#{indexController.redirecionaDashboard}">
	            <h:graphicImage class="titulo" library="img" name="logo.png"  pt:alt="a logo do site." pt:width="120" pt:height="60"/>
	        </h:commandLink>
	        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#conteudoNavbarSuportado"
	                aria-controls="conteudoNavbarSuportado" aria-expanded="false" aria-label="Alterna navegação">
	            <span class="navbar-toggler-icon"></span>
	        </button>
	
	        <div class="collapse navbar-collapse row" id="conteudoNavbarSuportado">
	
	            <ul class="navbar-nav mr-auto mt-4 mt-lg-2">
	            	<ui:insert name="nav">
		                <li class="nav-item active">
		                    <h:commandLink class="nav-link" 
		                    		value="| Principal"
		                    		action="#{indexController.redirecionaDashboard}"/>
		                </li>
		                <li class="nav-item" jsf:rendered="#{indexController.usuarioLogado == null}">
		                	<h:commandLink class="nav-link"
		                			value="| Logar"
		                			action="#{indexController.redirecionaLogin}"/>
		                </li>
		                <li class="nav-item" jsf:rendered="#{indexController.usuarioLogado == null}">
		                    <h:commandLink class="nav-link" 
		                    		value="| Cadastrar"
		                    		action="#{indexController.redirecionaCadastroUsuario}"/>
		                </li>
		                <li class="nav-item">
					    	<h:commandLink class="nav-link"
					    			value="| Carrinho"
					    			action="#{indexController.redirecionaCarrinho}"/>
		                </li>
		                <li class="nav-item" jsf:rendered="#{indexController.usuarioLogado != null}">
		                	<h:commandLink class="nav-link" 
		                    		value="| Finalizar Compra"
		                    		action="#{indexController.finalizarCompra}"/>
		                </li>
		                <li class="nav-item" jsf:rendered="#{indexController.usuarioLogado != null}">
        					<h:commandLink class="nav-link" 
		                    		value="| Sair"
		                    		action="#{indexController.sair}"/>
						</li>

		                <li class="nav-item dropdown" 
		                		jsf:rendered="#{indexController.usuarioLogado != null}">
		                	<h:link class="nav-link dropdown-toggle" 
		                    		id="navbarDropdownMenuLink" 
		                    		pt:data-toggle="dropdown"
		                       		pt:aria-haspopup="true"
		                       		pt:aria-expanded="false" 
		                       		value="| Mais opções"
		                       		pt:href="#"/> 
		                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
		                    	<h:commandLink class="dropdown-item" 
						    			value="Historico"
						    			action="#{indexController.redirecionaHistorico}"/>
		                    
			                    <h:commandLink class="dropdown-item" 
										value="Perfil"
										action="#{indexController.redirecionaPerfil}"/>
										
           			      		<h:commandLink class="dropdown-item" 
           			      				rendered="#{indexController.usuarioLogado.nivelAdm.id != 1}"
			                    		value=" Novo produto "
			                    		action="#{indexController.redirecionaCadastroProduto}"/>
										
		                   		<h:commandLink class="dropdown-item"
						   				rendered="#{indexController.usuarioLogado.nivelAdm.id != 1}"
			                    		value="Vendas"
						   				action="#{indexController.redirecionaVendas}"/>
						   				
						   		<h:commandLink class="dropdown-item"
						   				rendered="#{indexController.usuarioLogado.nivelAdm.id != 1}"
			                    		value="Novo Usuario"
						   				action="#{indexController.redirecionaFormUsuario}"/>
						   		
						   		<h:commandLink class="dropdown-item"
						   				rendered="#{indexController.usuarioLogado.nivelAdm.id != 1}"
			                    		value="Consulta Usuario"
						   				action="#{indexController.redirecionaConsultaUsuario}"/>
						   				
						   								   		
						   		<h:commandLink class="dropdown-item"
						   				rendered="#{indexController.usuarioLogado.nivelAdm.id != 1}"
			                    		value="Consulta Produto"
						   				action="#{indexController.redirecionaConsultaProduto}"/>
		                     </div>
		                </li>
	                </ui:insert>
	            </ul>
	            
          		<ui:insert name="pesquisa">
	          		<div class="form-inline my-2 my-lg-0">
		                <h:inputText class="form-control mr-sm-2" 
		                		name="pesquisa" 
		                		value="#{indexController.pesquisa}"
		                		pt:type="search"
		                		pt:placeholder="Pesquisar"
		                       	pt:aria-label="Search"/>
		                <h:commandButton class="btn btn-outline-success my-2 my-sm-0" 
		                		value="Pesquisar"
		                		action="#{indexController.pesquisar}"/>
	                		
	               	</div>
            	</ui:insert>
	        </div>
   		</nav>
	</h:form>
</header>

<ui:insert name="alert">
	<h:messages id="messages_index"
			infoStyle="color:green;"  
			warnStyle="color:yellow;"  
			errorStyle="color:red;" />
</ui:insert>


<ui:insert name="main">
	<main class="table_main" id="main_index">
		<h2 class="centralizar-centro">.:Produtos:.</h2>
		<h:form  class="form centralizado" id="form_index">
			<div class="centralizado tabela_dados">
			<h:dataTable class="table table-responsive-xl table-striped" 
					value="#{indexController.listaProduto}"
					var="obj" 
					id="index_data_table">
				<h:column>
					<f:facet name="header">Fornecedor</f:facet>
					<h:outputLabel value="#{obj.fornecedor.nome}" />
				</h:column>
				<h:column>
					<f:facet name="header">Valor</f:facet>
					<h:outputLabel value="#{obj.valor}">
						<f:convertNumber  locale="pt_BR" currencySymbol="R$" type="currency"/>
					</h:outputLabel>
				</h:column>
				<h:column>
					<f:facet name="header">Estoque</f:facet>
					<h:outputLabel value="#{obj.estoque}" />
				</h:column>
				<h:column>
					<f:facet name="header">Nivel</f:facet>
					<h:outputLabel value="#{obj.nivel.descricao}"/>
				</h:column>
				<h:column>
					<f:facet name="header">Descrição</f:facet>
					<h:outputLabel value="#{obj.descricao}" />
				</h:column>
				<h:column>
					<f:facet name="header">Marca</f:facet>
					<h:outputLabel value="#{obj.marca}" />
				</h:column>
				<h:column>
					<f:facet name="header">Tipo</f:facet>
					<h:outputLabel value="#{obj.tipo}" />
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:commandButton value="+"
								rendered="#{indexController.usuarioLogado != null and indexController.usuarioLogado.nivelAdm.id != 1}"
								class="btn btn-primary centralizado"
								action="#{indexController.redirecionaCadastroProduto}"/>
						<p class="texto_centro" 
								jsf:rendered="#{indexController.usuarioLogado == null or indexController.usuarioLogado.nivelAdm.id == 1}">
							Ação
						</p>
					</f:facet>
					
					<h:commandButton value="Comprar"
							class="btn btn-primary centralizado"
							actionListener="#{indexController.comprar(obj)}">
						
						<f:ajax execute="" 
								render="form_index messages_index"/>
					</h:commandButton>
				</h:column>
			</h:dataTable>
			</div>
		</h:form>
	</main>
</ui:insert>


<footer class="bg-dark">
	<ul>
		<li class="afastado">	 
			&#xA9; werbeth pereira
		</li>
		<li class="afastado">
		 	<h:link pt:href="mailto:werbeth.dev@gmail.com" 
		 			value="Email: werbeth.dev@gmail.com"
		 			pt:target="_blank"/>
		 </li>
		 <li class="afastado">
	 		<h:link pt:href="https://wa.me/qr/AMZ2RBGXSP7FD1" 
	 				value="WhatsApp: (63) 9 9121-5234"
	 				pt:target="_blank"/>
		 </li>
	</ul>
</footer>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<ui:insert name="script"/>

</h:body>
</html>